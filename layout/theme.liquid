<!doctype html>
<html lang="{{ request.locale.iso_code }}" class="tw-scroll-smooth">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% # Inlined CSS Variables %}
    {% render 'css-variables' %}

    {% comment %}
      Resource hints for faster third-party connections:
      1. Preconnect to Shopify CDN for images and assets
      2. Preconnect to font CDN
      3. DNS prefetch for analytics and other services
    {% endcomment %}
    <link rel="preconnect" href="https://cdn.shopify.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.shopify.com">

    {% comment %}
      Font preloading:
      1. Preconnect to font CDN for faster connection
      2. Preload only the critical font variant (base weight)
      3. Additional variants load on-demand via @font-face
    {% endcomment %}
    {% unless settings.type_primary_font.system? %}
      <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>

      {% comment %} Preload the base font variant for initial page render {% endcomment %}
      {{ settings.type_primary_font | font_url | preload_tag: as: 'font', crossorigin: 'anonymous' }}
    {% endunless %}

    {% # Load and preload the critical CSS %}
    {{ 'critical.css' | asset_url | stylesheet_tag: preload: true }}

    {% # Velox Theme - Tailwind CSS %}
    {{ 'velox.css' | asset_url | stylesheet_tag }}

    {% # Velox Animations & Effects %}
    {{ 'animations.css' | asset_url | stylesheet_tag }}

    {% # Splide.js - Lightweight slider library %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide-core.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js" defer></script>

    {% # Social, title, etc. %}
    {% render 'meta-tags' %}

    {{ content_for_header }}
  </head>

  <body 
    class="tw-antialiased"
    data-animation-repeat="{{ settings.animation_repeat }}"
    data-animation-threshold="{{ settings.animation_threshold | divided_by: 100.0 }}"
  >
    {%- comment -%} Skip to content link for accessibility {%- endcomment -%}
    <a
      href="#main-content"
      class="velox-skip-link tw-sr-only focus:tw-not-sr-only focus:tw-fixed focus:tw-top-4 focus:tw-left-4 focus:tw-z-[9999] focus:tw-bg-velox-900 focus:tw-text-white focus:tw-px-4 focus:tw-py-2 focus:tw-rounded-md focus:tw-shadow-lg"
    >
      {{ 'general.accessibility.skip_to_content' | t }}
    </a>

    {%- comment -%} Header with navigation landmark {%- endcomment -%}
    <header role="banner">
      {% sections 'header-group' %}
    </header>

    {%- comment -%} Main content area {%- endcomment -%}
    <main id="main-content" role="main" tabindex="-1">
      {{ content_for_layout }}
    </main>

    {%- comment -%} Footer with contentinfo landmark {%- endcomment -%}
    <footer role="contentinfo">
      {% sections 'footer-group' %}
    </footer>

    {% # Velox Theme - Global Configuration %}
    <script>
      window.Velox = window.Velox || {};
      window.Velox.i18n = {
        cart: {
          empty: {{ 'cart.general.empty' | t | json }},
          continueShopping: {{ 'cart.general.continue_shopping' | t | json }},
          item: {{ 'cart.general.item' | t | json }},
          items: {{ 'cart.general.items' | t | json }},
          updateError: {{ 'cart.general.update_error' | t | json }}
        },
        product: {
          adding: {{ 'products.product.adding' | t | json }},
          added: {{ 'products.product.added_to_cart' | t | json }},
          error: {{ 'products.product.error' | t | json }},
          loadError: {{ 'products.product.load_error' | t | json }}
        }
      };
    </script>

    {% # Velox Theme - Main JavaScript %}
    <script src="{{ 'velox.js' | asset_url }}" defer></script>

    {% # Wishlist System %}
    <script src="{{ 'wishlist.js' | asset_url }}" defer></script>

    {% # Quick View Modal %}
    {% render 'quick-view' %}

    {% # Quick Add Modal %}
    {% render 'quick-add-modal' %}

    {% # Cart Drawer - As section for dynamic updates %}
    {% section 'cart-drawer' %}

    {% # Newsletter Popup %}
    {% section 'newsletter-popup' %}
  </body>
</html>
