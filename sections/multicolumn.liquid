{% comment %}
  Velox Multicolumn Section
  Grid de características/beneficios con iconos.
{% endcomment %}

<section class="tw-py-12 md:tw-py-16 lg:tw-py-20 {% if section.settings.background_color == 'secondary' %}tw-bg-velox-50{% endif %}">
  <div class="tw-max-w-7xl tw-mx-auto tw-px-4 sm:tw-px-6 lg:tw-px-8">
    {%- comment -%} Header de la sección {%- endcomment -%}
    {% if section.settings.title != blank or section.settings.description != blank %}
      <div class="tw-text-center tw-mb-12">
        {% if section.settings.title != blank %}
          <h2 class="tw-text-2xl md:tw-text-3xl lg:tw-text-4xl tw-font-bold tw-text-velox-900">
            {{ section.settings.title }}
          </h2>
        {% endif %}

        {% if section.settings.description != blank %}
          <p class="tw-mt-4 tw-text-velox-600 tw-max-w-2xl tw-mx-auto">
            {{ section.settings.description }}
          </p>
        {% endif %}
      </div>
    {% endif %}

    {%- comment -%} Grid de columnas {%- endcomment -%}
    {% if section.blocks.size > 0 %}
      <div class="tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 lg:tw-grid-cols-{{ section.settings.columns }} tw-gap-8 lg:tw-gap-12">
        {% for block in section.blocks %}
          <div class="tw-text-{{ section.settings.column_alignment }}" {{ block.shopify_attributes }}>
            {%- comment -%} Icono o imagen {%- endcomment -%}
            {% if block.settings.image != blank %}
              <div class="tw-mb-4 {% if section.settings.column_alignment == 'center' %}tw-flex tw-justify-center{% endif %}">
                {{ block.settings.image | image_url: width: 120 | image_tag:
                  class: 'tw-w-16 tw-h-16 tw-object-contain',
                  loading: 'lazy'
                }}
              </div>
            {% elsif block.settings.icon != blank %}
              <div class="tw-mb-4 {% if section.settings.column_alignment == 'center' %}tw-flex tw-justify-center{% endif %}">
                <div class="tw-w-12 tw-h-12 tw-rounded-full tw-bg-velox-accent/10 tw-flex tw-items-center tw-justify-center">
                  {% render 'icon', name: block.settings.icon, class: 'tw-w-6 tw-h-6 tw-text-velox-accent' %}
                </div>
              </div>
            {% endif %}

            {%- comment -%} Título {%- endcomment -%}
            {% if block.settings.title != blank %}
              <h3 class="tw-text-lg tw-font-bold tw-text-velox-900">
                {{ block.settings.title }}
              </h3>
            {% endif %}

            {%- comment -%} Texto {%- endcomment -%}
            {% if block.settings.text != blank %}
              <p class="tw-mt-2 tw-text-velox-600">
                {{ block.settings.text }}
              </p>
            {% endif %}

            {%- comment -%} Link {%- endcomment -%}
            {% if block.settings.link_text != blank %}
              <a href="{{ block.settings.link }}" class="tw-inline-flex tw-items-center tw-mt-4 tw-text-velox-accent tw-font-medium hover:tw-underline tw-underline-offset-4">
                {{ block.settings.link_text }}
                {% render 'icon', name: 'arrow-right', class: 'tw-w-4 tw-h-4 tw-ml-1' %}
              </a>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    {% else %}
      {%- comment -%} Placeholder {%- endcomment -%}
      <div class="tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-8">
        {% for i in (1..3) %}
          <div class="tw-text-center">
            <div class="tw-w-12 tw-h-12 tw-rounded-full tw-bg-velox-100 tw-mx-auto tw-mb-4"></div>
            <div class="tw-h-4 tw-bg-velox-100 tw-rounded tw-w-1/2 tw-mx-auto tw-mb-2"></div>
            <div class="tw-h-3 tw-bg-velox-100 tw-rounded tw-w-3/4 tw-mx-auto"></div>
          </div>
        {% endfor %}
      </div>
      <p class="tw-text-center tw-text-velox-500 tw-mt-8">
        Agrega columnas usando el editor del tema.
      </p>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Multicolumn",
  "tag": "section",
  "class": "velox-multicolumn",
  "max_blocks": 6,
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Título",
      "default": "Por qué elegirnos"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Descripción"
    },
    {
      "type": "range",
      "id": "columns",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3,
      "label": "Columnas (desktop)"
    },
    {
      "type": "select",
      "id": "column_alignment",
      "label": "Alineación de columnas",
      "options": [
        { "value": "left", "label": "Izquierda" },
        { "value": "center", "label": "Centro" }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "background_color",
      "label": "Color de fondo",
      "options": [
        { "value": "transparent", "label": "Transparente" },
        { "value": "secondary", "label": "Secundario" }
      ],
      "default": "transparent"
    }
  ],
  "blocks": [
    {
      "type": "column",
      "name": "Columna",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "Icono",
          "options": [
            { "value": "", "label": "Ninguno" },
            { "value": "truck", "label": "Envío" },
            { "value": "shield-check", "label": "Garantía" },
            { "value": "credit-card", "label": "Pago seguro" },
            { "value": "arrow-path", "label": "Devoluciones" },
            { "value": "clock", "label": "24/7" },
            { "value": "gift", "label": "Regalo" },
            { "value": "heart", "label": "Favoritos" },
            { "value": "star", "label": "Calidad" },
            { "value": "sparkles", "label": "Nuevo" },
            { "value": "chat-bubble-left-right", "label": "Soporte" },
            { "value": "globe-alt", "label": "Internacional" },
            { "value": "leaf", "label": "Sostenible" }
          ],
          "default": "truck"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Imagen personalizada",
          "info": "Reemplaza el icono si se selecciona"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Título",
          "default": "Envío gratis"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Texto",
          "default": "En pedidos superiores a $50. Entrega rápida y segura a tu puerta."
        },
        {
          "type": "text",
          "id": "link_text",
          "label": "Texto del enlace"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Enlace"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Multicolumn",
      "category": "Text",
      "blocks": [
        {
          "type": "column",
          "settings": {
            "icon": "truck",
            "title": "Envío gratis",
            "text": "En pedidos superiores a $50. Entrega rápida y segura."
          }
        },
        {
          "type": "column",
          "settings": {
            "icon": "shield-check",
            "title": "Garantía de calidad",
            "text": "30 días de garantía en todos nuestros productos."
          }
        },
        {
          "type": "column",
          "settings": {
            "icon": "arrow-path",
            "title": "Devoluciones fáciles",
            "text": "Proceso de devolución simple y sin complicaciones."
          }
        }
      ]
    }
  ]
}
{% endschema %}
