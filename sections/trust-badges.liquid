{% comment %}
  Velox Trust Badges Section

  Muestra badges de confianza como envío gratis, garantía, etc.
  Configurable via bloques para máxima flexibilidad.
{% endcomment %}

{%- liquid
  assign layout = section.settings.layout
  assign show_heading = section.settings.show_heading
  assign heading = section.settings.heading
  assign bg_color = section.settings.background_color
  assign icon_style = section.settings.icon_style

  # Grid classes basado en cantidad de bloques
  assign block_count = section.blocks.size
  case block_count
    when 1
      assign grid_cols = 'lg:tw-grid-cols-1'
    when 2
      assign grid_cols = 'lg:tw-grid-cols-2'
    when 3
      assign grid_cols = 'lg:tw-grid-cols-3'
    when 5
      assign grid_cols = 'lg:tw-grid-cols-5'
    when 6
      assign grid_cols = 'lg:tw-grid-cols-6'
    else
      assign grid_cols = 'lg:tw-grid-cols-4'
  endcase

  # Background color class
  case bg_color
    when 'white'
      assign bg_class = 'tw-bg-white'
    when 'light'
      assign bg_class = 'tw-bg-velox-50'
    when 'dark'
      assign bg_class = 'tw-bg-velox-900'
      assign text_class = 'tw-text-white'
      assign text_muted_class = 'tw-text-velox-300'
    when 'accent'
      assign bg_class = 'tw-bg-velox-accent'
      assign text_class = 'tw-text-white'
      assign text_muted_class = 'tw-text-white/80'
    else
      assign bg_class = 'tw-bg-white'
  endcase

  assign text_class = text_class | default: 'tw-text-velox-900'
  assign text_muted_class = text_muted_class | default: 'tw-text-velox-500'
-%}

<section
  class="{{ bg_class }} tw-py-12 sm:tw-py-16"
  style="padding-top: {{ section.settings.padding_top }}px; padding-bottom: {{ section.settings.padding_bottom }}px;"
  {{ section.shopify_attributes }}
>
  <div class="tw-mx-auto tw-max-w-7xl tw-px-4 sm:tw-px-6 lg:tw-px-8">
    {%- comment -%} Heading opcional {%- endcomment -%}
    {% if show_heading and heading != blank %}
      <h2 class="tw-text-center tw-text-lg tw-font-semibold {{ text_class }} tw-mb-10">
        {{ heading }}
      </h2>
    {% endif %}

    {%- comment -%} Grid de badges {%- endcomment -%}
    {% if section.blocks.size > 0 %}
      {% if layout == 'grid' %}
        {%- comment -%} Layout Grid {%- endcomment -%}
        <div class="tw-grid tw-grid-cols-2 md:tw-grid-cols-3 {{ grid_cols }} tw-gap-8 lg:tw-gap-12">
          {% for block in section.blocks %}
            {% render 'trust-badge-item',
              block: block,
              icon_style: icon_style,
              text_class: text_class,
              text_muted_class: text_muted_class,
              layout: 'vertical'
            %}
          {% endfor %}
        </div>
      {% elsif layout == 'horizontal' %}
        {%- comment -%} Layout Horizontal (inline) {%- endcomment -%}
        <div class="tw-flex tw-flex-wrap tw-items-center tw-justify-center tw-gap-x-12 tw-gap-y-6">
          {% for block in section.blocks %}
            {% render 'trust-badge-item',
              block: block,
              icon_style: icon_style,
              text_class: text_class,
              text_muted_class: text_muted_class,
              layout: 'horizontal'
            %}
          {% endfor %}
        </div>
      {% else %}
        {%- comment -%} Layout Bar (compacto) {%- endcomment -%}
        <div class="tw-flex tw-flex-wrap tw-items-center tw-justify-center tw-divide-x tw-divide-velox-200">
          {% for block in section.blocks %}
            <div class="tw-px-6 tw-py-2 {% if forloop.first %}tw-pl-0{% endif %} {% if forloop.last %}tw-pr-0{% endif %}">
              {% render 'trust-badge-item',
                block: block,
                icon_style: icon_style,
                text_class: text_class,
                text_muted_class: text_muted_class,
                layout: 'compact'
              %}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% else %}
      {%- comment -%} Placeholder para editor {%- endcomment -%}
      <div class="tw-text-center tw-py-8 {{ text_muted_class }}">
        <p>{{ 'sections.trust_badges.placeholder' | t | default: 'Agrega badges usando el editor del tema' }}</p>
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Trust badges",
  "tag": "section",
  "class": "section-trust-badges",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_heading",
      "label": "Mostrar titulo",
      "default": false
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Titulo",
      "default": "Por qué elegirnos"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Diseño",
      "options": [
        { "value": "grid", "label": "Grid (vertical)" },
        { "value": "horizontal", "label": "Horizontal" },
        { "value": "bar", "label": "Barra compacta" }
      ],
      "default": "grid"
    },
    {
      "type": "select",
      "id": "icon_style",
      "label": "Estilo de iconos",
      "options": [
        { "value": "default", "label": "Por defecto" },
        { "value": "circle", "label": "Circulo con fondo" },
        { "value": "square", "label": "Cuadrado con fondo" }
      ],
      "default": "default"
    },
    {
      "type": "select",
      "id": "background_color",
      "label": "Color de fondo",
      "options": [
        { "value": "white", "label": "Blanco" },
        { "value": "light", "label": "Gris claro" },
        { "value": "dark", "label": "Oscuro" },
        { "value": "accent", "label": "Acento" }
      ],
      "default": "light"
    },
    {
      "type": "header",
      "content": "Espaciado"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding superior",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding inferior",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 48
    }
  ],
  "blocks": [
    {
      "type": "badge",
      "name": "Badge",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "Icono",
          "options": [
            { "value": "truck", "label": "Camion (envio)" },
            { "value": "shield-check", "label": "Escudo (garantia)" },
            { "value": "arrow-path", "label": "Flechas (devoluciones)" },
            { "value": "credit-card", "label": "Tarjeta (pago seguro)" },
            { "value": "clock", "label": "Reloj (24/7)" },
            { "value": "phone", "label": "Telefono (soporte)" },
            { "value": "chat-bubble-left-right", "label": "Chat (atencion)" },
            { "value": "gift", "label": "Regalo (envoltura)" },
            { "value": "heart", "label": "Corazon (satisfaccion)" },
            { "value": "star", "label": "Estrella (calidad)" },
            { "value": "check-badge", "label": "Check (verificado)" },
            { "value": "lock-closed", "label": "Candado (seguridad)" },
            { "value": "globe-americas", "label": "Globo (envio mundial)" },
            { "value": "banknotes", "label": "Billetes (mejor precio)" }
          ],
          "default": "truck"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Titulo",
          "default": "Envío gratis"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Descripcion",
          "default": "En pedidos mayores a $50"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Enlace (opcional)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Trust badges",
      "category": "Utility",
      "settings": {
        "show_heading": false,
        "heading": "Why choose us",
        "layout": "grid",
        "icon_style": "circle",
        "background_color": "light",
        "padding_top": 48,
        "padding_bottom": 48
      },
      "blocks": [
        {
          "type": "badge",
          "settings": {
            "icon": "truck",
            "title": "Free shipping",
            "description": "On orders over $50"
          }
        },
        {
          "type": "badge",
          "settings": {
            "icon": "shield-check",
            "title": "2-year warranty",
            "description": "Full protection included"
          }
        },
        {
          "type": "badge",
          "settings": {
            "icon": "arrow-path",
            "title": "Easy returns",
            "description": "30-day hassle-free returns"
          }
        },
        {
          "type": "badge",
          "settings": {
            "icon": "lock-closed",
            "title": "Secure payment",
            "description": "256-bit SSL encryption"
          }
        }
      ]
    }
  ]
}
{% endschema %}
