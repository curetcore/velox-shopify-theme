{% comment %}
  Velox Theme - Main Search Section
  Página de resultados de búsqueda
  Adaptado de Tailwind Plus command-palettes y stacked-lists
{% endcomment %}

{%- liquid
  assign color_scheme = section.settings.color_scheme | default: 'light'
  assign show_filters = section.settings.show_filters
  assign products_per_page = section.settings.products_per_page | default: 12
-%}

<div class="velox-search velox-search--{{ color_scheme }}" data-section-id="{{ section.id }}">
  <div class="velox-search__container">
    {%- comment %} Header con formulario de búsqueda {% endcomment -%}
    <header class="velox-search__header">
      <h1 class="velox-search__title">{{ 'search.title' | t }}</h1>

      <form action="{{ routes.search_url }}" method="get" class="velox-search__form" role="search">
        <div class="velox-search__input-wrapper">
          <svg class="velox-search__input-icon" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
          </svg>
          <input
            type="search"
            name="q"
            value="{{ search.terms | escape }}"
            placeholder="{{ 'search.placeholder' | t }}"
            class="velox-search__input"
            aria-label="{{ 'search.title' | t }}"
            autocomplete="off"
            autocorrect="off"
            autocapitalize="off"
            spellcheck="false"
          >
          {%- if search.terms != blank -%}
            <button type="button" class="velox-search__clear" onclick="this.previousElementSibling.value=''; this.previousElementSibling.focus();" aria-label="{{ 'general.accessibility.close' | t }}">
              <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
              </svg>
            </button>
          {%- endif -%}
        </div>
        <button type="submit" class="velox-search__submit">
          {{ 'search.submit' | t }}
        </button>
      </form>
    </header>

    {%- if search.performed -%}
      {%- comment %} Filtros por tipo de recurso {% endcomment -%}
      {%- if show_filters -%}
        <nav class="velox-search__filters" aria-label="{{ 'search.filter_by' | t }}">
          <a
            href="{{ routes.search_url }}?q={{ search.terms | url_encode }}"
            class="velox-search__filter {% if search.types == blank %}velox-search__filter--active{% endif %}"
          >
            {{ 'search.all' | t }}
            <span class="velox-search__filter-count">{{ search.results_count }}</span>
          </a>
          <a
            href="{{ routes.search_url }}?q={{ search.terms | url_encode }}&type=product"
            class="velox-search__filter {% if search.types contains 'product' and search.types.size == 1 %}velox-search__filter--active{% endif %}"
          >
            {{ 'search.products' | t }}
          </a>
          <a
            href="{{ routes.search_url }}?q={{ search.terms | url_encode }}&type=article"
            class="velox-search__filter {% if search.types contains 'article' and search.types.size == 1 %}velox-search__filter--active{% endif %}"
          >
            {{ 'search.articles' | t }}
          </a>
          <a
            href="{{ routes.search_url }}?q={{ search.terms | url_encode }}&type=page"
            class="velox-search__filter {% if search.types contains 'page' and search.types.size == 1 %}velox-search__filter--active{% endif %}"
          >
            {{ 'search.pages' | t }}
          </a>
        </nav>
      {%- endif -%}

      {%- comment %} Resultados {% endcomment -%}
      {%- if search.results_count > 0 -%}
        <p class="velox-search__results-count">
          {{ 'search.results_for_html' | t: count: search.results_count, terms: search.terms }}
        </p>

        {%- paginate search.results by products_per_page -%}
          <div class="velox-search__results">
            {%- for item in search.results -%}
              <article class="velox-search__item">
                {%- case item.object_type -%}
                  {%- when 'product' -%}
                    <a href="{{ item.url }}" class="velox-search__item-link">
                      <div class="velox-search__item-image-wrapper">
                        {%- if item.featured_image != blank -%}
                          <img
                            src="{{ item.featured_image | image_url: width: 200 }}"
                            alt="{{ item.featured_image.alt | escape }}"
                            width="200"
                            height="{{ 200 | divided_by: item.featured_image.aspect_ratio | round }}"
                            class="velox-search__item-image"
                            loading="lazy"
                          >
                        {%- else -%}
                          <div class="velox-search__item-placeholder">
                            <svg fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
                            </svg>
                          </div>
                        {%- endif -%}
                      </div>
                      <div class="velox-search__item-content">
                        <span class="velox-search__item-type">{{ 'search.product' | t }}</span>
                        <h3 class="velox-search__item-title">{{ item.title }}</h3>
                        <p class="velox-search__item-price">
                          {%- if item.compare_at_price > item.price -%}
                            <span class="velox-search__item-price--sale">{{ item.price | money }}</span>
                            <span class="velox-search__item-price--compare">{{ item.compare_at_price | money }}</span>
                          {%- else -%}
                            {{ item.price | money }}
                          {%- endif -%}
                        </p>
                      </div>
                      <svg class="velox-search__item-arrow" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                      </svg>
                    </a>

                  {%- when 'article' -%}
                    <a href="{{ item.url }}" class="velox-search__item-link">
                      <div class="velox-search__item-image-wrapper">
                        {%- if item.image != blank -%}
                          <img
                            src="{{ item.image | image_url: width: 200 }}"
                            alt="{{ item.image.alt | escape }}"
                            width="200"
                            height="{{ 200 | divided_by: item.image.aspect_ratio | round }}"
                            class="velox-search__item-image"
                            loading="lazy"
                          >
                        {%- else -%}
                          <div class="velox-search__item-placeholder">
                            <svg fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
                            </svg>
                          </div>
                        {%- endif -%}
                      </div>
                      <div class="velox-search__item-content">
                        <span class="velox-search__item-type">{{ 'search.article' | t }}</span>
                        <h3 class="velox-search__item-title">{{ item.title }}</h3>
                        {%- if item.excerpt != blank -%}
                          <p class="velox-search__item-excerpt">{{ item.excerpt | strip_html | truncate: 100 }}</p>
                        {%- endif -%}
                        <p class="velox-search__item-meta">
                          {{ item.published_at | date: format: 'abbreviated_date' }}
                          {%- if item.author != blank %} &middot; {{ item.author }}{% endif -%}
                        </p>
                      </div>
                      <svg class="velox-search__item-arrow" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                      </svg>
                    </a>

                  {%- when 'page' -%}
                    <a href="{{ item.url }}" class="velox-search__item-link">
                      <div class="velox-search__item-image-wrapper">
                        <div class="velox-search__item-placeholder">
                          <svg fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
                          </svg>
                        </div>
                      </div>
                      <div class="velox-search__item-content">
                        <span class="velox-search__item-type">{{ 'search.page' | t }}</span>
                        <h3 class="velox-search__item-title">{{ item.title }}</h3>
                        {%- if item.content != blank -%}
                          <p class="velox-search__item-excerpt">{{ item.content | strip_html | truncate: 100 }}</p>
                        {%- endif -%}
                      </div>
                      <svg class="velox-search__item-arrow" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                      </svg>
                    </a>
                {%- endcase -%}
              </article>
            {%- endfor -%}
          </div>

          {%- comment %} Paginación {% endcomment -%}
          {%- if paginate.pages > 1 -%}
            <nav class="velox-search__pagination" aria-label="{{ 'general.pagination.title' | t }}">
              {%- if paginate.previous -%}
                <a href="{{ paginate.previous.url }}" class="velox-search__pagination-btn velox-search__pagination-btn--prev" aria-label="{{ 'general.pagination.previous' | t }}">
                  <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
                  </svg>
                  {{ 'general.pagination.previous' | t }}
                </a>
              {%- endif -%}

              <div class="velox-search__pagination-pages">
                {%- for part in paginate.parts -%}
                  {%- if part.is_link -%}
                    <a href="{{ part.url }}" class="velox-search__pagination-page" aria-label="{{ 'general.pagination.page' | t: number: part.title }}">
                      {{ part.title }}
                    </a>
                  {%- else -%}
                    {%- if part.title == paginate.current_page -%}
                      <span class="velox-search__pagination-page velox-search__pagination-page--current" aria-current="page">
                        {{ part.title }}
                      </span>
                    {%- else -%}
                      <span class="velox-search__pagination-ellipsis">{{ part.title }}</span>
                    {%- endif -%}
                  {%- endif -%}
                {%- endfor -%}
              </div>

              {%- if paginate.next -%}
                <a href="{{ paginate.next.url }}" class="velox-search__pagination-btn velox-search__pagination-btn--next" aria-label="{{ 'general.pagination.next' | t }}">
                  {{ 'general.pagination.next' | t }}
                  <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                  </svg>
                </a>
              {%- endif -%}
            </nav>
          {%- endif -%}
        {%- endpaginate -%}

      {%- else -%}
        {%- comment %} Sin resultados {% endcomment -%}
        <div class="velox-search__empty">
          <div class="velox-search__empty-icon">
            <svg fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
            </svg>
          </div>
          <h2 class="velox-search__empty-title">{{ 'search.no_results_title' | t }}</h2>
          <p class="velox-search__empty-message">
            {{ 'search.no_results_html' | t: terms: search.terms }}
          </p>
          <div class="velox-search__empty-suggestions">
            <p>{{ 'search.suggestions' | t }}:</p>
            <ul>
              <li>{{ 'search.suggestion_spelling' | t }}</li>
              <li>{{ 'search.suggestion_broader' | t }}</li>
              <li>{{ 'search.suggestion_different' | t }}</li>
            </ul>
          </div>
          <a href="{{ routes.all_products_collection_url }}" class="velox-search__empty-cta">
            {{ 'search.browse_products' | t }}
          </a>
        </div>
      {%- endif -%}

    {%- else -%}
      {%- comment %} Estado inicial - sin búsqueda realizada {% endcomment -%}
      <div class="velox-search__initial">
        <div class="velox-search__initial-icon">
          <svg fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
          </svg>
        </div>
        <p class="velox-search__initial-text">{{ 'search.initial_message' | t }}</p>

        {%- comment %} Colecciones populares {% endcomment -%}
        {%- if section.settings.show_popular_collections -%}
          <div class="velox-search__popular">
            <h2 class="velox-search__popular-title">{{ 'search.popular_collections' | t }}</h2>
            <div class="velox-search__popular-grid">
              {%- for collection in collections limit: 4 -%}
                {%- if collection.products_count > 0 -%}
                  <a href="{{ collection.url }}" class="velox-search__popular-item">
                    {%- if collection.image != blank -%}
                      <img
                        src="{{ collection.image | image_url: width: 300 }}"
                        alt="{{ collection.title | escape }}"
                        width="150"
                        height="150"
                        class="velox-search__popular-image"
                        loading="lazy"
                      >
                    {%- elsif collection.products.first.featured_image != blank -%}
                      <img
                        src="{{ collection.products.first.featured_image | image_url: width: 300 }}"
                        alt="{{ collection.title | escape }}"
                        width="150"
                        height="150"
                        class="velox-search__popular-image"
                        loading="lazy"
                      >
                    {%- endif -%}
                    <span class="velox-search__popular-name">{{ collection.title }}</span>
                  </a>
                {%- endif -%}
              {%- endfor -%}
            </div>
          </div>
        {%- endif -%}
      </div>
    {%- endif -%}
  </div>
</div>

{% style %}
  /* ===========================================
     Velox Search - Estilos principales
     =========================================== */

  .velox-search {
    --search-accent: var(--color-accent, #4f46e5);
    --search-accent-hover: var(--color-accent-hover, #4338ca);
    padding: 3rem 1rem;
    min-height: 60vh;
  }

  .velox-search__container {
    max-width: 56rem;
    margin: 0 auto;
  }

  /* Header */
  .velox-search__header {
    text-align: center;
    margin-bottom: 2rem;
  }

  .velox-search__title {
    font-size: 2rem;
    font-weight: 700;
    color: #111827;
    margin: 0 0 1.5rem;
  }

  /* Formulario de búsqueda */
  .velox-search__form {
    display: flex;
    gap: 0.75rem;
    max-width: 32rem;
    margin: 0 auto;
  }

  .velox-search__input-wrapper {
    position: relative;
    flex: 1;
  }

  .velox-search__input-icon {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    width: 1.25rem;
    height: 1.25rem;
    color: #9ca3af;
    pointer-events: none;
  }

  .velox-search__input {
    width: 100%;
    padding: 0.75rem 2.5rem 0.75rem 3rem;
    font-size: 1rem;
    border: 1px solid #d1d5db;
    border-radius: 0.5rem;
    background: #ffffff;
    color: #111827;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
  }

  .velox-search__input:focus {
    outline: none;
    border-color: var(--search-accent);
    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
  }

  .velox-search__clear {
    position: absolute;
    right: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    padding: 0.25rem;
    background: none;
    border: none;
    cursor: pointer;
    color: #9ca3af;
    transition: color 0.2s ease;
  }

  .velox-search__clear:hover {
    color: #6b7280;
  }

  .velox-search__clear svg {
    width: 1.25rem;
    height: 1.25rem;
  }

  .velox-search__submit {
    padding: 0.75rem 1.5rem;
    font-size: 0.875rem;
    font-weight: 600;
    color: #ffffff;
    background: var(--search-accent);
    border: none;
    border-radius: 0.5rem;
    cursor: pointer;
    transition: background 0.2s ease;
    white-space: nowrap;
  }

  .velox-search__submit:hover {
    background: var(--search-accent-hover);
  }

  /* Filtros */
  .velox-search__filters {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
  }

  .velox-search__filter {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: #6b7280;
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 9999px;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .velox-search__filter:hover {
    color: #374151;
    background: #f3f4f6;
    border-color: #d1d5db;
  }

  .velox-search__filter--active {
    color: #ffffff;
    background: var(--search-accent);
    border-color: var(--search-accent);
  }

  .velox-search__filter--active:hover {
    color: #ffffff;
    background: var(--search-accent-hover);
    border-color: var(--search-accent-hover);
  }

  .velox-search__filter-count {
    font-size: 0.75rem;
    padding: 0.125rem 0.5rem;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 9999px;
  }

  .velox-search__filter--active .velox-search__filter-count {
    background: rgba(255, 255, 255, 0.2);
  }

  /* Contador de resultados */
  .velox-search__results-count {
    font-size: 0.875rem;
    color: #6b7280;
    margin-bottom: 1.5rem;
    text-align: center;
  }

  /* Resultados */
  .velox-search__results {
    display: flex;
    flex-direction: column;
    gap: 1px;
    background: #e5e7eb;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    overflow: hidden;
  }

  .velox-search__item {
    background: #ffffff;
  }

  .velox-search__item-link {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    text-decoration: none;
    transition: background 0.2s ease;
  }

  .velox-search__item-link:hover {
    background: #f9fafb;
  }

  .velox-search__item-image-wrapper {
    flex-shrink: 0;
    width: 4rem;
    height: 4rem;
  }

  .velox-search__item-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 0.5rem;
  }

  .velox-search__item-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f3f4f6;
    border-radius: 0.5rem;
    color: #9ca3af;
  }

  .velox-search__item-placeholder svg {
    width: 1.5rem;
    height: 1.5rem;
  }

  .velox-search__item-content {
    flex: 1;
    min-width: 0;
  }

  .velox-search__item-type {
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--search-accent);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .velox-search__item-title {
    font-size: 0.9375rem;
    font-weight: 600;
    color: #111827;
    margin: 0.25rem 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .velox-search__item-price {
    font-size: 0.875rem;
    font-weight: 600;
    color: #111827;
    margin: 0;
  }

  .velox-search__item-price--sale {
    color: #dc2626;
  }

  .velox-search__item-price--compare {
    color: #9ca3af;
    text-decoration: line-through;
    font-weight: 400;
    margin-left: 0.5rem;
  }

  .velox-search__item-excerpt {
    font-size: 0.875rem;
    color: #6b7280;
    margin: 0.25rem 0 0;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
  }

  .velox-search__item-meta {
    font-size: 0.75rem;
    color: #9ca3af;
    margin: 0.25rem 0 0;
  }

  .velox-search__item-arrow {
    flex-shrink: 0;
    width: 1.25rem;
    height: 1.25rem;
    color: #9ca3af;
    transition: color 0.2s ease, transform 0.2s ease;
  }

  .velox-search__item-link:hover .velox-search__item-arrow {
    color: var(--search-accent);
    transform: translateX(2px);
  }

  /* Paginación */
  .velox-search__pagination {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    margin-top: 2rem;
  }

  .velox-search__pagination-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: #374151;
    background: #ffffff;
    border: 1px solid #d1d5db;
    border-radius: 0.5rem;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .velox-search__pagination-btn:hover {
    background: #f9fafb;
    border-color: #9ca3af;
  }

  .velox-search__pagination-btn svg {
    width: 1rem;
    height: 1rem;
  }

  .velox-search__pagination-pages {
    display: flex;
    align-items: center;
    gap: 0.25rem;
  }

  .velox-search__pagination-page {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 2.5rem;
    height: 2.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: #374151;
    text-decoration: none;
    border-radius: 0.375rem;
    transition: all 0.2s ease;
  }

  .velox-search__pagination-page:hover {
    background: #f3f4f6;
  }

  .velox-search__pagination-page--current {
    color: #ffffff;
    background: var(--search-accent);
  }

  .velox-search__pagination-ellipsis {
    padding: 0 0.5rem;
    color: #9ca3af;
  }

  /* Estado vacío - sin resultados */
  .velox-search__empty {
    text-align: center;
    padding: 3rem 1rem;
  }

  .velox-search__empty-icon {
    width: 4rem;
    height: 4rem;
    margin: 0 auto 1.5rem;
    color: #d1d5db;
  }

  .velox-search__empty-icon svg {
    width: 100%;
    height: 100%;
  }

  .velox-search__empty-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: #111827;
    margin: 0 0 0.5rem;
  }

  .velox-search__empty-message {
    font-size: 0.9375rem;
    color: #6b7280;
    margin: 0 0 1.5rem;
  }

  .velox-search__empty-suggestions {
    text-align: left;
    max-width: 20rem;
    margin: 0 auto 1.5rem;
    padding: 1rem;
    background: #f9fafb;
    border-radius: 0.5rem;
  }

  .velox-search__empty-suggestions p {
    font-size: 0.875rem;
    font-weight: 500;
    color: #374151;
    margin: 0 0 0.5rem;
  }

  .velox-search__empty-suggestions ul {
    margin: 0;
    padding-left: 1.25rem;
  }

  .velox-search__empty-suggestions li {
    font-size: 0.875rem;
    color: #6b7280;
    margin: 0.25rem 0;
  }

  .velox-search__empty-cta {
    display: inline-flex;
    align-items: center;
    padding: 0.75rem 1.5rem;
    font-size: 0.875rem;
    font-weight: 600;
    color: #ffffff;
    background: var(--search-accent);
    border-radius: 0.5rem;
    text-decoration: none;
    transition: background 0.2s ease;
  }

  .velox-search__empty-cta:hover {
    background: var(--search-accent-hover);
  }

  /* Estado inicial */
  .velox-search__initial {
    text-align: center;
    padding: 2rem 1rem;
  }

  .velox-search__initial-icon {
    width: 4rem;
    height: 4rem;
    margin: 0 auto 1rem;
    color: #d1d5db;
  }

  .velox-search__initial-icon svg {
    width: 100%;
    height: 100%;
  }

  .velox-search__initial-text {
    font-size: 0.9375rem;
    color: #6b7280;
    margin: 0 0 2rem;
  }

  /* Colecciones populares */
  .velox-search__popular {
    margin-top: 2rem;
  }

  .velox-search__popular-title {
    font-size: 1rem;
    font-weight: 600;
    color: #111827;
    margin: 0 0 1rem;
    text-align: center;
  }

  .velox-search__popular-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }

  .velox-search__popular-item {
    position: relative;
    display: block;
    aspect-ratio: 1;
    border-radius: 0.75rem;
    overflow: hidden;
    text-decoration: none;
  }

  .velox-search__popular-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .velox-search__popular-item:hover .velox-search__popular-image {
    transform: scale(1.05);
  }

  .velox-search__popular-name {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: flex-end;
    padding: 1rem;
    background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
    font-size: 0.875rem;
    font-weight: 600;
    color: #ffffff;
  }

  /* ===========================================
     Responsive
     =========================================== */

  @media (min-width: 640px) {
    .velox-search {
      padding: 4rem 1.5rem;
    }

    .velox-search__title {
      font-size: 2.5rem;
    }

    .velox-search__item-image-wrapper {
      width: 5rem;
      height: 5rem;
    }

    .velox-search__item-title {
      white-space: normal;
    }

    .velox-search__item-excerpt {
      -webkit-line-clamp: 2;
    }

    .velox-search__popular-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .velox-search {
      padding: 5rem 2rem;
    }

    .velox-search__item-link {
      padding: 1.25rem 1.5rem;
    }

    .velox-search__item-image-wrapper {
      width: 6rem;
      height: 6rem;
    }
  }

  /* ===========================================
     Dark mode
     =========================================== */

  .velox-search--dark {
    background: #111827;
  }

  .velox-search--dark .velox-search__title {
    color: #f9fafb;
  }

  .velox-search--dark .velox-search__input {
    background: #1f2937;
    border-color: #374151;
    color: #f9fafb;
  }

  .velox-search--dark .velox-search__input:focus {
    border-color: var(--search-accent);
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
  }

  .velox-search--dark .velox-search__filter {
    color: #9ca3af;
    background: #1f2937;
    border-color: #374151;
  }

  .velox-search--dark .velox-search__filter:hover {
    color: #d1d5db;
    background: #374151;
  }

  .velox-search--dark .velox-search__results-count {
    color: #9ca3af;
  }

  .velox-search--dark .velox-search__results {
    background: #374151;
    border-color: #374151;
  }

  .velox-search--dark .velox-search__item {
    background: #1f2937;
  }

  .velox-search--dark .velox-search__item-link:hover {
    background: #374151;
  }

  .velox-search--dark .velox-search__item-placeholder {
    background: #374151;
    color: #6b7280;
  }

  .velox-search--dark .velox-search__item-title {
    color: #f9fafb;
  }

  .velox-search--dark .velox-search__item-price {
    color: #f9fafb;
  }

  .velox-search--dark .velox-search__item-excerpt {
    color: #9ca3af;
  }

  .velox-search--dark .velox-search__pagination-btn {
    color: #d1d5db;
    background: #1f2937;
    border-color: #374151;
  }

  .velox-search--dark .velox-search__pagination-btn:hover {
    background: #374151;
  }

  .velox-search--dark .velox-search__pagination-page {
    color: #d1d5db;
  }

  .velox-search--dark .velox-search__pagination-page:hover {
    background: #374151;
  }

  .velox-search--dark .velox-search__empty-title {
    color: #f9fafb;
  }

  .velox-search--dark .velox-search__empty-message {
    color: #9ca3af;
  }

  .velox-search--dark .velox-search__empty-suggestions {
    background: #1f2937;
  }

  .velox-search--dark .velox-search__empty-suggestions p {
    color: #d1d5db;
  }

  .velox-search--dark .velox-search__empty-suggestions li {
    color: #9ca3af;
  }

  .velox-search--dark .velox-search__initial-text {
    color: #9ca3af;
  }

  .velox-search--dark .velox-search__popular-title {
    color: #f9fafb;
  }
{% endstyle %}

{% schema %}
{
  "name": "Search results",
  "tag": "section",
  "class": "section-search",
  "enabled_on": {
    "templates": ["search"]
  },
  "settings": [
    {
      "type": "range",
      "id": "products_per_page",
      "label": "Results per page",
      "min": 6,
      "max": 24,
      "step": 3,
      "default": 12
    },
    {
      "type": "checkbox",
      "id": "show_filters",
      "label": "Show type filters",
      "default": true,
      "info": "Filter by products, articles, or pages"
    },
    {
      "type": "checkbox",
      "id": "show_popular_collections",
      "label": "Show popular collections",
      "default": true,
      "info": "Displayed when no search is performed"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color scheme",
      "options": [
        { "value": "light", "label": "Light" },
        { "value": "dark", "label": "Dark" }
      ],
      "default": "light"
    }
  ],
  "presets": [
    {
      "name": "Search results",
      "category": "Text"
    }
  ]
}
{% endschema %}
